/* Chat System - Consolidated Styles */

:root {
  --primary-color: #0084ff;
  --primary-dark: #0073e6;
  --text-primary: #000;
  --text-secondary: #65676b;
  --text-muted: #999;
  --bg-primary: #fff;
  --bg-secondary: #fafafa;
  --bg-tertiary: #f0f0f0;
  --border-color: #e5e5e5;
  --message-own-bg: #0084ff;
  --message-other-bg: #e5e7eb;
  --success-color: #31a24c;
  --danger-color: #f44336;
  --warning-color: #ff9800;

  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 20px;

  --transition-fast: 0.15s ease;
  --transition-normal: 0.2s ease;
  --transition-slow: 0.3s ease;
}

/* Base Styles */
.chat-system * {
  box-sizing: border-box;
}

.chat-system {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  color: var(--text-primary);
  background: var(--bg-primary);
}

/* Typography */
.chat-system h1, .chat-system h2, .chat-system h3 {
  margin: 0;
  font-weight: 600;
}

.chat-system p {
  margin: 0;
}

/* Buttons */
.chat-system button {
  font-family: inherit;
  font-size: inherit;
}

/* Utility Classes */
.chat-system .truncate {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.chat-system .sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Responsive Design */

/* Desktop (1024px and above) */
@media (min-width: 1024px) {
  .chat-container {
    display: flex !important;
  }

  .chat-sidebar {
    width: 320px !important;
    position: relative !important;
    transform: none !important;
    border-right: 1px solid var(--border-color) !important;
    border-bottom: none !important;
    height: auto !important;
  }

  .chat-main {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .chat-header-back {
    display: none !important;
  }
}

/* Tablet (640px to 1023px) */
@media (min-width: 640px) and (max-width: 1023px) {
  .chat-sidebar {
    width: 280px !important;
  }

  .message-content-wrapper {
    max-width: 70% !important;
  }

  .chat-header {
    padding: 10px 12px !important;
  }
}

/* Mobile (up to 639px) */
@media (max-width: 639px) {
  .chat-container {
    flex-direction: column !important;
  }

  .chat-sidebar {
    width: 100% !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: auto !important;
    height: auto !important;
    max-height: 60vh !important;
    z-index: 999 !important;
    border-right: none !important;
    border-bottom: 1px solid var(--border-color) !important;
    transform: translateY(-100%) !important;
    transition: transform var(--transition-normal) !important;
  }

  .chat-sidebar.mobile-open {
    transform: translateY(0) !important;
  }

  .chat-main {
    width: 100% !important;
  }

  .chat-header-back {
    display: flex !important;
  }

  .message-content-wrapper {
    max-width: 85% !important;
  }

  .chat-list-item {
    padding: 10px 8px !important;
  }

  .chat-header {
    padding: 8px 12px !important;
    height: 52px !important;
  }

  .message-textarea {
    border-radius: 18px !important;
    padding: 6px 10px !important;
    font-size: 13px !important;
    min-height: 32px !important;
  }

  .input-action-btn,
  .send-btn {
    width: 32px !important;
    height: 32px !important;
  }

  .emoji-picker-wrapper {
    position: fixed !important;
    bottom: auto !important;
    top: 50% !important;
    right: auto !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    max-height: 300px !important;
    z-index: 9999 !important;
  }

  .message-menu {
    right: auto !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    margin: 8px 0 0 0 !important;
  }

  .header-menu {
    right: 0 !important;
  }
}

/* Extra Small Devices (up to 480px) */
@media (max-width: 480px) {
  .chat-list-item-name {
    font-size: 13px !important;
  }

  .chat-list-item-preview {
    font-size: 12px !important;
  }

  .message-text {
    font-size: 13px !important;
  }

  .chat-header-name {
    font-size: 14px !important;
  }

  .reactions-grid {
    grid-template-columns: repeat(4, 1fr) !important;
  }

  .message-content-wrapper {
    max-width: 90% !important;
  }

  .message-bubble.own {
    padding-right: 4px !important;
  }

  .message-bubble:not(.own) {
    padding-left: 4px !important;
  }
}

/* Print Styles */
@media print {
  .chat-header,
  .message-input-container,
  .chat-list-search,
  .message-actions,
  .input-action-btn {
    display: none !important;
  }

  .chat-window {
    height: auto;
  }

  .message-bubble {
    page-break-inside: avoid;
  }
}

/* Dark Mode Support (if system prefers dark mode) */
@media (prefers-color-scheme: dark) {
  :root {
    --text-primary: #e4e6eb;
    --text-secondary: #b0b3b8;
    --text-muted: #666;
    --bg-primary: #000;
    --bg-secondary: #0a0a0a;
    --bg-tertiary: #1a1a1a;
    --border-color: #2a2a2a;
    --message-other-bg: #262626;
  }

  .chat-system {
    background: var(--bg-primary);
    color: var(--text-primary);
  }

  .search-input,
  .message-textarea {
    background: var(--bg-tertiary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
  }

  .message-content {
    background: var(--message-other-bg) !important;
    color: var(--text-primary) !important;
  }

  .input-action-btn {
    color: var(--primary-color) !important;
  }

  .input-action-btn:hover {
    background: var(--bg-tertiary) !important;
  }

  .header-menu,
  .message-menu {
    background: var(--bg-secondary) !important;
    border-color: var(--border-color) !important;
  }

  .header-menu button,
  .message-menu button {
    color: var(--text-primary) !important;
  }

  .header-menu button:hover,
  .message-menu button:hover {
    background: var(--bg-tertiary) !important;
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .chat-system,
  .chat-system * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* High DPI Support */
@media (min-device-pixel-ratio: 2) {
  .message-bubble {
    border-width: 0.5px;
  }
}
